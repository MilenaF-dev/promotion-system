<%= flash[:notice] %>

<h1><%= @promotion.name %></h1>
<dl>
  <dt>Descrição</dt>
  <dd><%= @promotion.description %></dd>
  <dt>Porcentagem de desconto</dt>
  <dd><%= number_to_percentage @promotion.discount_rate, precision: 2, separator: "," %></dd>
  <dt>Código</dt>
  <dd><%= @promotion.code %></dd>
  <dt>Data de expiração</dt>
  <dd><%= I18n.localize @promotion.expiration_date %></dd>
  <dt>Quantidade de cupons</dt>
  <dd><%= @promotion.coupon_quantity %></dd>
</dl>

<%= link_to "Editar", edit_promotion_path(id: @promotion.id) %>
<%= link_to "Apagar", promotion_path(id: @promotion.id),
            method: :delete,
            data: { confirm: "Tem certeza que deseja apagar essa promoção" } %><br>
<div>
  <% unless @promotion.coupons.any? %>
    <%= link_to "Gerar cupons", generate_coupons_promotion_path(@promotion), method: :post %>
  <% end %>
</div>
<%= link_to "Voltar", promotions_path %>

<div class="coupons">
  <hr>
  <% @promotion.coupons.each do |coupon| %>
    <%= coupon.code %><br>
  <% end %>
</div>